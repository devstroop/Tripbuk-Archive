@layout UserLayout
@page "/management/masters/accounts/create"
@attribute [Authorize]

<PageTitle>Create an Account</PageTitle>
<RadzenStack>
    <RadzenBreadCrumb>
        <RadzenBreadCrumbItem Text="Management" />
        <RadzenBreadCrumbItem Text="Masters" />
        <RadzenBreadCrumbItem Text="Accounts" Path="/management/masters/accounts"/>
        <RadzenBreadCrumbItem Text="Create" Path="/management/masters/accounts/create" />
    </RadzenBreadCrumb>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="6">
            <RadzenText Text="Create an Account" TextStyle="TextStyle.H3" TagName="TagName.H1" style="margin: 0" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="6">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
                <RadzenButton ButtonType="ButtonType.Submit" Text="Save"
                              Variant="Variant.Flat" Icon="save"/>
                <RadzenButton ButtonStyle="ButtonStyle.Light" Text="Discard" Variant="Variant.Flat"
                              Click="@(() => NavigationManager.NavigateTo("/management/masters/accounts"))"/>
            </RadzenStack>
        </RadzenColumn>
    </RadzenRow>
    <RadzenAlert Shade="Shade.Lighter" Variant="Variant.Flat" Size="AlertSize.Small" AlertStyle="AlertStyle.Danger"
                 Visible="@ErrorVisible">Cannot save Account
    </RadzenAlert>
    <RadzenTemplateForm TItem="Server.Models.Postgres.Account" Data="@Account" Visible="@(Account != null && CanEdit)"
                        Submit="@FormSubmit">
        <RadzenRow>
            <RadzenColumn SizeMD="6">
                <RadzenStack>
                    <RadzenFieldset Text="General">
                        <RadzenStack Gap="0">
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Name" Component="AccountName" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.AccountName"
                                                   Name="AccountName" Placeholder="Account Name"/>
                                    <RadzenRequiredValidator Component="AccountName" Text="Name is required"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Alias" Component="Alias" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Alias"
                                                   Name="Alias"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Print Name" Component="PrintName" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.PrintName"
                                                   Name="PrintName"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Group" Component="AccountGroup" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenDropDownDataGrid Data="@AccountGroupsForGroup" TextProperty="GroupName"
                                                            ValueProperty="Id" AllowClear=true
                                                            Placeholder="Choose Group" style="display: block; width: 100%"
                                                            @bind-Value="@Account.Group" Name="AccountGroup"
                                                            SelectedValue=@AccountGroupsForGroupValue
                                                            Count=@AccountGroupsForGroupCount
                                                            LoadData=@AccountGroupsForGroupLoadData/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Op. Bal." Component="OpeningBalance" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenNumeric style="display: block; width: 100%" Name="OpeningBalance" Value="0"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Prev. Year Bal." Component="PreviousYearBalance"
                                                 style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenNumeric style="display: block; width: 100%" Name="PreviousYearBalance"
                                                   Value="0"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="GSTIN" Component="Gstin" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Gstin"
                                                   Name="Gstin" Placeholder="GSTIN"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="PAN" Component="Pan" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Pan" Name="Pan"
                                                   Placeholder="PAN"/>
                                </RadzenColumn>
                            </RadzenRow>
                        </RadzenStack>
                    </RadzenFieldset>
                    <RadzenFieldset Text="Additional">
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenRow style="margin-bottom: 1rem">
                                    <RadzenColumn SizeMD="3">
                                        <RadzenLabel Text="Credit Limit" Component="CreditLimit" style="width: 100%"/>
                                    </RadzenColumn>
                                    <RadzenColumn SizeMD="9">
                                        <RadzenNumeric style="display: block; width: 100%"
                                                       @bind-Value="@Account.CreditLimit" Name="CreditLimit"/>
                                    </RadzenColumn>
                                </RadzenRow>
                            </RadzenColumn>
                            <RadzenColumn>
                                <RadzenRow style="margin-bottom: 1rem">
                                    <RadzenColumn SizeMD="3">
                                        <RadzenLabel Text="Credit Days" Component="CreditDays" style="width: 100%"/>
                                    </RadzenColumn>
                                    <RadzenColumn SizeMD="9">
                                        <RadzenNumeric style="display: block; width: 100%" @bind-Value="@Account.CreditDays"
                                                       Name="CreditDays"/>
                                    </RadzenColumn>
                                </RadzenRow>
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenFieldset>
                </RadzenStack>
            </RadzenColumn>
            <RadzenColumn SizeMD="6">
                <RadzenStack>
                    <RadzenFieldset Text="Contact">
                        <RadzenRow style="margin-bottom: 1rem">
                            <RadzenColumn SizeMD="3">
                                <RadzenLabel Text="Contact Person" Component="ContactPerson" style="width: 100%"/>
                            </RadzenColumn>
                            <RadzenColumn SizeMD="9">
                                <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.ContactPerson"
                                               Name="ContactPerson"/>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow style="margin-bottom: 1rem">
                            <RadzenColumn SizeMD="3">
                                <RadzenLabel Text="Primary Phone" Component="PrimaryPhone" style="width: 100%"/>
                            </RadzenColumn>
                            <RadzenColumn SizeMD="9">
                                <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Phone"
                                               Name="PrimaryPhone"/>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow style="margin-bottom: 1rem">
                            <RadzenColumn SizeMD="3">
                                <RadzenLabel Text="Secondary Phone" Component="SecondaryPhone" style="width: 100%"/>
                            </RadzenColumn>
                            <RadzenColumn SizeMD="9">
                                <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Mobile"
                                               Name="SecondaryPhone"/>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow style="margin-bottom: 1rem">
                            <RadzenColumn SizeMD="3">
                                <RadzenLabel Text="Email" Component="Email" style="width: 100%"/>
                            </RadzenColumn>
                            <RadzenColumn SizeMD="9">
                                <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Email"
                                               Name="Email"/>
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenFieldset>
                    <RadzenFieldset Text="Address">
                        <RadzenStack Gap="0">
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Address" Component="Address" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextArea style="display: block; width: 100%" @bind-Value="@Account.Address"
                                                    Name="Address"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="City" Component="City" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.City"
                                                   Name="City"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="State" Component="State" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.State"
                                                   Name="State"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Pin Code" Component="PinCode" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.PinCode"
                                                   Name="PinCode"/>
                                </RadzenColumn>
                            </RadzenRow>
                            <RadzenRow style="margin-bottom: 1rem">
                                <RadzenColumn SizeMD="3">
                                    <RadzenLabel Text="Country" Component="Country" style="width: 100%"/>
                                </RadzenColumn>
                                <RadzenColumn SizeMD="9">
                                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@Account.Country"
                                                   Name="Country"/>
                                </RadzenColumn>
                            </RadzenRow>
                        </RadzenStack>
                    </RadzenFieldset>
                </RadzenStack>
            </RadzenColumn>
        </RadzenRow>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center"
                     JustifyContent="JustifyContent.End" Gap="0.5rem">
        </RadzenStack>
    </RadzenTemplateForm>
</RadzenStack>

